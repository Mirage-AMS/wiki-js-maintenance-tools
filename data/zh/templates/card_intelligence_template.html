<div class="card-container" style="width: 900px; margin: 20px auto; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
    <!-- 卡牌标题栏 -->
    <div class="card-header" style="background: #2c3e50; color: #ffffff; padding: 15px 20px;">
        <h2 style="margin: 0; font-size: 24px; font-weight: 700; color: #ffffff;">{{ card.card_name }}</h2>
        <div style="font-size: 14px; opacity: 0.9; margin-top: 5px; color: #e0e0e0;">{{ card.card_attribute }}</div>
    </div>

    <!-- 上半部分：图片和效果说明 -->
    <div class="card-upper" style="display: flex; padding: 20px; gap: 25px; background: #f8f9fa;">
        <!-- 左侧：仅展示卡牌图片 -->
        <div class="card-image-container" style="flex: 2;">
            <div class="card-image" style="border: 1px solid #e1e4e8; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <img src="{{ card.card_image_url }}" alt="{{ card.card_name }}卡牌图片" style="width: 100%; display: block;">
            </div>
        </div>

        <!-- 右侧：卡牌效果说明和基本信息 -->
        <div class="card-description" style="flex: 3;">
            <div style="background: white; border-radius: 8px; padding: 18px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px;">
                <h3 style="margin-top: 0; color: #2c3e50; border-bottom: 1px solid #e1e4e8; padding-bottom: 10px; font-size: 18px;">基本信息</h3>
                <div style="margin-top: 10px;">
                    <!-- 价值区域，左侧添加两个空栏位使其与下方对齐 -->
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <!-- 左侧第一个空栏位 -->
                        <div style="flex: 1; padding: 8px; background: transparent; border-radius: 4px;"></div>
                        <!-- 左侧第二个空栏位 -->
                        <div style="flex: 1; padding: 8px; background: transparent; border-radius: 4px;"></div>
                        <!-- 价值内容 -->
                        <div style="flex: 1; display: flex; justify-content: space-between; padding: 8px; background: #f0f4f8; border-radius: 4px;">
                            <span  style="font-weight: 600;">价值</span>
                            <span>{{ card.card_price or "无" }}</span>
                        </div>
                    </div>
                    <!-- 等级、类型、属性在下方一行显示 -->
                    <div style="display: flex; gap: 10px;">
                        <div style="flex: 1; display: flex; justify-content: space-between; padding: 8px; background: #f0f4f8; border-radius: 4px;">
                            <span  style="font-weight: 600;">等级</span>
                            <span>{{ card.card_level or "无" }}</span>
                        </div>
                        <div style="flex: 1; display: flex; justify-content: space-between; padding: 8px; background: #f0f4f8; border-radius: 4px;">
                            <span  style="font-weight: 600;">类型</span>
                            <span>{{ card.card_resource_type or "无" }}</span>
                        </div>
                        <div style="flex: 1; display: flex; justify-content: space-between; padding: 8px; background: #f0f4f8; border-radius: 4px;">
                            <span  style="font-weight: 600;">属性</span>
                            <span>{{ card.card_tag or "无" }}</span>
                        </div>
                    </div>
                </div>
            </div>


            <!-- 解锁条件 -->
            {% if card.unlock and card.unlock.strip() %}
            <div style="background: white; border-radius: 8px; padding: 18px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px;">
                <h3 style="display: inline-block; margin-top: 0; margin-bottom: 0; color: #2c3e50; font-size: 18px; font-weight: bold; margin-right: 10px;">解锁：</h3>
                <div style="display: inline-block; font-size: 16px; color: #555; line-height: 1.5;">
                    {{ card.unlock }}
                </div>
            </div>
            {% endif %}

            <!-- 精通条件 -->
            {% if card.master and card.master.strip() %}
            <div style="background: white; border-radius: 8px; padding: 18px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px;">
                <h3 style="display: inline-block; margin-top: 0; margin-bottom: 0; color: #2c3e50; font-size: 18px; font-weight: bold; margin-right: 10px;">精通：</h3>
                <div style="display: inline-block; font-size: 16px; color: #555; line-height: 1.5;">
                    {{ card.master }}
                </div>
            </div>
            {% endif %}

            <!-- 卡牌效果 -->
            <div style="background: white; border-radius: 8px; padding: 18px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px;">
                <h3 style="margin-top: 0; color: #2c3e50; border-bottom: 1px solid #e1e4e8; padding-bottom: 10px; font-size: 18px;">卡牌效果</h3>
                <div style="line-height: 1.6; color: #34495e; font-size: 15px;">
                    {% for effect in card.effects %}
                        {% set effect_type_bg_color, effect_type_text_color =
                            ('dbeafe', '1e40af') if effect.type == '永久' else
                            ('dcfce7', '16a34a') if effect.type == '启动' else
                            ('fee2e2', 'dc2626') if effect.type == '快速' else
                            ('f3f4f6', '6b7280') if effect.type == '未知' else
                            ('ff0000', 'ffffff') %}
                    <div style="margin: 15px 0; padding-left: 10px; border-left: 3px solid #{{ effect_type_bg_color }};">
                        <div style="display: flex; align-items: center; flex-wrap: wrap; gap: 8px; font-weight: 600; margin-bottom: 5px;">
                            <!-- 类型标签块 -->
                            <span style="background-color: #{{ effect_type_bg_color }}; color: #{{ effect_type_text_color }}; padding: 3px 8px; border-radius: 4px; font-size: 13px;">
                                {{ effect.type }}{% if effect.location %} ({{ effect.location }}){% endif %}
                            </span>

                            <!-- 效果名称 -->
                            <span>{{ effect.name }}</span>

                            <!-- 消耗信息（如存在） -->
                            {% if effect.consumption %}
                            <span style="font-size: 14px; color: #7f8c8d;">
                                （消耗：{{ effect.consumption }}）
                            </span>
                            {% endif %}
                        </div>

                        <!-- 效果描述文本 -->
                        <div style="margin: 5px 0;">{{ effect.text }}</div>
                    </div>
                    {% endfor %}

                    {% if card.card_info_description %}
                    <p style="margin: 10px 0; color: #7f8c8d; font-style: italic;">{{ card.card_info_description }}</p>
                    {% endif %}
                </div>
            </div>

            <!-- 统计信息（胜率等整合为一行） -->
            <div style="background: white; border-radius: 8px; padding: 18px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                <h3 style="margin-top: 0; color: #2c3e50; border-bottom: 1px solid #e1e4e8; padding-bottom: 10px; font-size: 18px;">卡牌数据</h3>
                <div style="display: flex; justify-content: space-between; padding: 10px; background: #f0f4f8; border-radius: 4px; margin-top: 10px;">
                    <div style="display: flex; gap: 20px; width: 100%; justify-content: space-around;">
                        <div style="text-align: center;">
                            <span style="display: block; font-size: 14px; color: #6c757d;">胜率</span>
                            <span style="font-weight: 600; font-size: 15px;">{{ "%.1f%%"|format(stat['win-rate'] * 100) if stat['win-rate'] else 'N/A' }}</span>
                        </div>
                        <div style="text-align: center;">
                            <span style="display: block; font-size: 14px; color: #6c757d;">解锁率</span>
                            <span style="font-weight: 600; font-size: 15px;">{{ "%.1f%%"|format(stat['unlock-rate'] * 100) if stat['unlock-rate'] else 'N/A' }}</span>
                        </div>
                        <div style="text-align: center;">
                            <span style="display: block; font-size: 14px; color: #6c757d;">保留率</span>
                            <span style="font-weight: 600; font-size: 15px;">{{ "%.1f%%"|format(stat['keep-rate'] * 100) if stat['keep-rate'] else 'N/A' }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 底栏：双栏布局（左侧调整历史，右侧FAQ） -->
    <div class="card-footer" style="background: white; padding: 20px; border-top: 1px solid #e1e4e8; display: flex; gap: 20px;">
        <!-- 左侧：版本调整历史 -->
        <div class="card-revise" style="flex: 1;">
            <h3 style="margin-top: 0; color: #2c3e50; font-size: 18px;">版本调整历史</h3>
            <div style="margin-top: 15px;">
                {% for revision in revise %}
                    {% if revision.date and revision.content %}
                    <div style="padding: 12px; border-left: 3px solid #3498db; background: #f8f9fa; margin-bottom: 12px; border-radius: 0 4px 4px 0;">
                        <div style="font-weight: 600; color: #2980b9;">{{ revision.date }}</div>
                        <div style="margin-top: 5px; color: #34495e; font-size: 14px;">{{ revision.content }}</div>
                    </div>
                    {% endif %}
                {% else %}
                <div style="padding: 12px; background: #f8f9fa; margin-bottom: 12px; border-radius: 4px; text-align: center; color: #7f8c8d;">
                    暂无调整记录
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- 右侧：FAQ信息 -->
        <div class="card-faq" style="flex: 1;">
            <h3 style="margin-top: 0; color: #2c3e50; font-size: 18px;">常见问题（FAQ）</h3>
            <div style="margin-top: 15px;">
                {% for item in faq %}
                    {% if item.question and item.answer %}
                    <div style="padding: 12px; border-left: 3px solid #2ecc71; background: #f8f9fa; margin-bottom: 12px; border-radius: 0 4px 4px 0;">
                        <div style="font-weight: 600; color: #27ae60;">Q：{{ item.question }}</div>
                        <div style="margin-top: 5px; color: #34495e; font-size: 14px;">A：{{ item.answer }}</div>
                    </div>
                    {% endif %}
                {% else %}
                <div style="padding: 12px; background: #f8f9fa; margin-bottom: 12px; border-radius: 4px; text-align: center; color: #7f8c8d;">
                    暂无常见问题记录
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
